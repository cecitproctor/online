 :root {
      --bg-primary: #0a1a0a; /* Dark green */
      --bg-secondary: #000000; /* Black */
      --bg-accent: #4a0a0a; /* Maroon */
      --glass-bg: rgba(255, 255, 255, 0.1); /* Semi-transparent for glass */
      --glass-border: rgba(255, 255, 255, 0.2);
      --glass-blur: blur(10px);
      --accent: #10b981; /* Sharp emerald green */
      --text-primary: #e5e7eb; /* Light gray */
      --text-muted: #9ca3af;
      --warn: #dc2626; /* Maroon red for warnings */
      --ok: #10b981;
      --bad: #dc2626;
      --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    * {
      box-sizing: border-box;
    }
    body {
      background: radial-gradient(ellipse at center, var(--bg-accent) 0%, var(--bg-primary) 50%, var(--bg-secondary) 100%);
      background-attachment: fixed;
      color: var(--text-primary);
      /* Use Candara as requested, with fallbacks */
      font-family: Candara, 'Segoe UI', system-ui, -apple-system, sans-serif;
      font-weight: 400;
      line-height: 1.5;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    body, html {
      height: 100%;
    }
    body {
      display: flex;
      flex-direction: column;
    }
    main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Header: Sharp, bold with subtle glass overlay */
    .header-bg {
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: var(--glass-blur);
      border-bottom: 1px solid var(--glass-border);
      padding: 0.5rem 0;
      text-align: center;
      position: relative;
      z-index: 10;
    }
    .header-bg h1 {
      font-size: clamp(1.5rem, 4vw, 2.5rem);
      font-weight: 700;
      letter-spacing: 0.05em;
      margin: 0;
      color: var(--text-primary);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }
    .header-bg h2 {
      font-size: clamp(1rem, 3vw, 1.25rem);
      font-weight: 600;
      margin: 0.5rem 0;
      color: var(--bad);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    .header-bg p {
      font-size: clamp(0.875rem, 2vw, 1rem);
      margin: 0;
      color: var(--text-muted);
      font-weight: 300;
    }
    /* Main Container: Centered, minimal padding */
    main {
      min-height: auto;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      justify-content: flex-start;
      padding: 1rem 1rem 2rem 1rem;
      position: relative;
    }
    .container {
      max-width: 800px;
      padding: 0;
    }
    /* HUD Pills: Glassmorphic, sharp rounded */
    .hud-pills {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
      justify-content: center;
      margin: 1rem 0;
      z-index: 5;
    }
    .pill-custom {
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      border: 1px solid var(--glass-border);
      border-radius: 50px;
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text-primary);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: var(--shadow-glass);
      letter-spacing: 0.025em;
    }
    .pill-custom:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
    }
    .pill-custom.updated {
      animation: pulse 0.6s ease-in-out;
      border-color: var(--accent);
      box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.8; }
    }
    /* Quiz Area: Full-width for questions */
    #quiz {
      width: 100%;
      min-height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    /* Glassmorphic Cards: Sharp, elevated */
    .card-custom {
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      box-shadow: var(--shadow-glass);
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      max-width: 600px;
      width: 100%;
      margin: 1rem auto;
    }
    .card-custom:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
      border-color: rgba(255, 255, 255, 0.3);
    }
    .card-custom.skipped-phase {
      background: linear-gradient(180deg, rgba(5,5,5,0.65), rgba(10,10,10,0.7));
      border: 1px solid rgba(255,255,255,0.03);
    }
    .card-body {
      padding: 1rem;
      text-align: center;
    }
    .card-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      letter-spacing: 0.025em;
    }
    /* Question Text: Sharp, readable */
    .question-text {
      font-size: 1.125rem;
      line-height: 1.6;
      text-align: left;
      margin: 1rem 0 2rem 0;
      color: var(--text-primary);
      font-weight: 400;
      background: rgba(0, 0, 0, 0.2);
      padding: 1rem;
      border-radius: 12px;
      border-left: 4px solid var(--accent);
      white-space: pre-wrap; 
      margin-bottom: 1.5rem; 
    }
    /* Form: Glassmorphic inputs, floating labels */
    .form-floating {
      margin-bottom: 1.5rem;
    }
    .form-control {
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      border: 1px solid var(--glass-border);
      border-radius: 12px;
      color: var(--text-primary);
      padding: 1rem;
      font-size: 1rem;
      transition: all 0.3s ease;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .form-control:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 0.25rem rgba(16, 185, 129, 0.2), inset 0 2px 4px rgba(0, 0, 0, 0.1);
      background: rgba(255, 255, 255, 0.15);
      color: var(--text-primary);
    }
    .form-control::placeholder {
      color: var(--text-muted);
    }
    .form-floating > label {
      color: var(--text-muted);
      font-weight: 500;
      padding-left: 1rem;
    }
    .form-floating > .form-control:focus ~ label,
    .form-floating > .form-control:not(:placeholder-shown) ~ label {
      color: var(--accent);
      transform: scale(0.85) translateY(-0.5rem) translateX(0.15rem);
    }
    /* Buttons: Sharp, glassmorphic with glow */
    .btn-accent {
      background: linear-gradient(135deg, var(--accent), #059669);
      border: none;
      border-radius: 12px;
      color: #ffffff;
      font-weight: 600;
      padding: 0.45rem 0.9rem; /* reverted to smaller */
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
      letter-spacing: 0.025em;
      text-transform: uppercase;
      font-size: 0.875rem;
    }
    .btn-accent:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
      background: linear-gradient(135deg, #059669, var(--accent));
    }
    .btn-accent:active {
      transform: translateY(0);
    }
    .btn-secondary {
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      color: var(--text-primary);
      border-radius: 12px;
      transition: all 0.3s ease;
    }
    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: var(--accent);
      color: var(--text-primary);
    }
    /* Modals: Full glassmorphism */
    .modal-content-custom {
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      box-shadow: var(--shadow-glass);
      color: var(--text-primary);
      transform: scale(0.95);
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .modal.show .modal-content-custom {
      transform: scale(1);
      opacity: 1;
    }
    .modal-header-custom {
      border-bottom: 1px solid var(--glass-border);
      color: var(--text-primary);
      padding: 1.5rem;
      border-radius: 20px 20px 0 0;
    }
    .modal-body-custom {
      color: var(--text-primary);
      padding: 1.5rem;
    }
    .modal-footer {
      border-top: 1px solid var(--glass-border);
      padding: 1rem 1.5rem 1.5rem;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 0 0 20px 20px;
    }
    .warn-text {
      color: var(--bad);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    /* Loading Spinner: Glass-integrated */
    .loading-spinner {
      display: none;
      text-align: center;
      padding: 2rem;
    }
    .loading-spinner.show {
      display: block;
    }
    .spinner-border-custom {
      color: var(--accent);
      width: 3rem;
      height: 3rem;
      border-width: 0.25em;
    }
    .loading-spinner p {
      color: var(--text-muted);
      font-weight: 400;
      margin-top: 1rem;
    }
    /* Loader from css-loaders.com (bouncing) adapted */
    .loader { margin: 0 auto; height: 60px; aspect-ratio: 2; border-bottom: 3px solid #0000; background: linear-gradient(90deg,#524656 50%,#0000 0) -25% 100%/50% 3px repeat-x border-box; position: relative; animation: l3-0 .75s linear infinite; }
    .loader:before { content: ""; position: absolute; inset: auto 42.5% 0; aspect-ratio: 1; border-radius: 50%; background: var(--accent); animation: l3-1 .75s cubic-bezier(0,900,1,900) infinite; }
    @keyframes l3-0 { to {background-position: -125% 100%} }
    @keyframes l3-1 { 0%,2% {bottom: 0%} 98%,to {bottom:.1%} }
    /* Fade-in for Questions/Results: Sharp entry */
    .fade-in {
      opacity: 0;
      transform: translateY(20px) scale(0.98);
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .fade-in.show {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    /* Answer Input: Enhanced glass */
    .answer-input {
      width: 100%;
      padding: 1rem;
      border-radius: 12px;
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      color: var(--text-primary);
      margin-top: 1rem;
      font-size: 1rem;
      transition: all 0.3s ease;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
      resize: none; /* we'll auto-resize via JS */
    }
    .answer-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 0.25rem rgba(16, 185, 129, 0.2), inset 0 2px 4px rgba(0, 0, 0, 0.1);
      background: rgba(255, 255, 255, 0.15);
    }
    .answer-input::placeholder {
      color: var(--text-muted);
    }
    /* Footer: Subtle glass */
    footer {
      color: var(--text-muted);
      text-align: center;
      padding: 1.5rem;
      background: rgba(0, 0, 0, 0.2);
      border-top: 1px solid var(--glass-border);
      font-size: 0.875rem;
      font-weight: 300;
      margin-top: auto;
    }

  /* Exit page violation card styling */
  .card-violated {
    border: 2px solid rgba(107,2,30,0.9);
    background: linear-gradient(180deg, rgba(75,10,10,0.15), rgba(20,5,5,0.2));
  }
    /* Responsive Adjustments */
    @media (max-width: 768px) {
      main {
        padding: 1rem;
      }
      .card-body {
        padding: 1.5rem;
      }
       /* Ensure inputs are visible above virtual keyboard */
       html, body { scroll-padding-top: 120px; }
      .hud-pills {
        gap: 0.5rem;
      }
      .pill-custom {
        padding: 0.4rem 0.8rem;
        font-size: 0.75rem;
      }
    }
  /* Prevent text highlight globally but allow inputs and textareas */
  body, body * { user-select: none; -webkit-user-select: none; }
  input, textarea, select { user-select: text; -webkit-user-select: text; }

  /* Allow textarea to grow but not overflow the card */
  .answer-input { max-height: 50vh; overflow: auto; }

/* Skip panel: thin, mobile-friendly */
/* Inline skipped list styles (hidden by default) */
.skipped-inline { width: 100%; max-width: 760px; margin: 0 auto; background: var(--glass-bg); padding: 0.75rem; border-radius: 12px; border: 1px solid var(--glass-border); }
.skipped-inline-header { font-weight: 600; color: var(--text-primary); }
.skipped-item { min-width: 64px; padding: 0.375rem 0.5rem; border-radius: 8px; background: rgba(220,38,38,0.08); color: var(--warn); border: 1px solid rgba(220,38,38,0.18); display: inline-flex; align-items: center; justify-content: center; font-size: 0.9rem; }
.skipped-item .small-time { font-size: 0.9rem; }
.skipped-inline.d-none { display: none; }

@media (max-width: 480px) {
  .skipped-item { min-width: 56px; }
}
/* Question bar: small numbered pills representing randomized order */
.question-bar { display: none; }

/* Resume banner */
.resume-banner {
  opacity: 0; transform: translateY(-6px); transition: all 320ms ease; text-align:center; padding:0.5rem; border-radius:8px; background: rgba(0,0,0,0.35); color: var(--text-primary); border:1px solid rgba(255,255,255,0.04);
}
.resume-banner.show { opacity: 1; transform: translateY(0); }

/* True/False button styling */
.tf-options { display:flex; gap:0.75rem; justify-content:center; width:100%; }
.tf-btn { display:flex; align-items:center; justify-content:center; flex:1 1 0; min-width:0; height:56px; border-radius:8px; background: rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.06); color:var(--text-primary); cursor:pointer; }
.tf-btn input { display:none; }
.tf-btn span { width:100%; text-align:center; font-weight:600; }
.tf-btn input:checked + span { color:#fff; background: linear-gradient(90deg,var(--accent), #059669); box-shadow: 0 8px 30px rgba(16,185,129,0.25); border-radius:6px; padding:0.25rem 0; }

/* Submit & Skip sizing */
.btn-skip { width: 28%; max-width: 160px; }
.btn-accent.flex-grow-1 { flex: 1 1 auto; }
/* Options container: center and separate from submit area */
.options-container { display:flex; justify-content:center; }
.options-container .list-group { width:100%; max-width:560px; }
.options-container + .d-flex { margin-top: 1rem; }
.options-block-sep { margin-top: 0.75rem; margin-bottom: 0.75rem; border-top: 1px solid rgba(255,255,255,0.04); padding-top: 0.75rem; }
/* MCQ inline letter-only choices */
.mcq-inline { display:flex; gap:0.75rem; justify-content:space-between; align-items:center; width:100%; }
.mcq-btn { display:flex; align-items:center; justify-content:center; flex:1 1 0; min-width:0; height:56px; border-radius:8px; background: rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.06); cursor:pointer; padding:0.25rem; }
.mcq-btn input { display:none; }
.mcq-btn .mcq-letter { display:inline-block; width:100%; text-align:center; font-weight:700; color:var(--text-primary); }
.mcq-btn input:checked + .mcq-letter { color:#ffffff; background: linear-gradient(90deg,var(--accent), #059669); box-shadow: 0 8px 30px rgba(16,185,129,0.25); border-radius:6px; padding:0.25rem 0; }
.mcq-btn:hover { background: rgba(255,255,255,0.05); }
    /* Sharp Scrollbar (optional, for modern browsers) */
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.2);
    }
    ::-webkit-scrollbar-thumb {
      background: var(--accent);
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #059669;
    }
       /* Glassmorphism for Dropdowns (form-select) */
   .form-select {
     background: var(--glass-bg, rgba(255, 255, 255, 0.1)); /* Semi-transparent white; fallback if no CSS vars */
     border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.2));
     color: var(--text-primary, #ffffff); /* White text for dark theme */
     backdrop-filter: blur(10px); /* Frosted glass effect */
   }
   .form-select:focus {
     border-color: var(--accent, #10b981); /* Emerald green border on focus */
     box-shadow: 0 0 0 0.25rem rgba(16, 185, 129, 0.2); /* Matching Bootstrap focus ring */
     background: var(--glass-bg-focus, rgba(255, 255, 255, 0.15)); /* Slightly more opaque on focus */
   }
   .form-select option {
     background: var(--bg-primary, #1a1a1a); /* Dark background for options */
     color: var(--text-primary, #ffffff); /* White text in dropdown list */
   }
   .form-floating > .form-select {
     padding-top: 1.625rem; /* Adjust for floating label overlap */
     padding-bottom: 0.625rem;
   }
   
 /* Loading Spinner Enhancements */
 #loadingSpinner {
     position: fixed;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%);
     z-index: 1050;
     background: rgba(255, 255, 255, 0.9);
     padding: 20px;
     border-radius: 10px;
     box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
 }
 
 #loadingSpinner.show {
     display: block !important; /* Override d-none if needed */
 }
 
 /* Error Modal Tweaks */
 #errorModal .modal-body {
     max-height: 300px;
     overflow-y: auto;
 }
 
 #errorText {
     white-space: pre-line; /* Preserve line breaks in messages */
 }

/* Additional spinner (rotating layered) provided by user */
.loader {
  width: 30px;
  aspect-ratio: .577;
  color: #000;
  display: grid;
  background:
    linear-gradient(currentColor 0 0) top   /100% 1px,
    linear-gradient(currentColor 0 0) bottom/100% 1px,
    linear-gradient(to bottom right, #0000 calc(50% - 2px),currentColor calc(50% - 1px),#0000 50%) top/100% calc(100% + 2px),
    linear-gradient(to bottom left , #0000 calc(50% - 2px),currentColor calc(50% - 1px),#0000 50%) top/100% calc(100% + 2px);
  background-repeat: no-repeat;
  animation: l17 4s infinite linear;
}
.loader::before,
.loader::after {
  content: "";
  grid-area: 1/1;
  background: inherit;
  border:inherit;
  animation: inherit;
}
.loader::after {
  animation-duration: 2s;
}
@keyframes l17 {
  100% {transform: rotate(1turn)}
}